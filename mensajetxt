Tu tarea es convertir automÃ¡ticamente un PDF tipo "listicle de productos" en dos archivos CSV para Webflow.

âš¡ LECCIONES CLAVE APRENDIDAS:

1ï¸âƒ£ EXTRACCIÃ“N DE URLs:
Las URLs de imÃ¡genes y links NO estÃ¡n visibles como texto en el PDF.
EstÃ¡n embebidas como hipervÃ­nculos. SIEMPRE usar:
  strings "archivo.pdf" | grep "/URI"
para extraerlas antes de procesar el contenido.

2ï¸âƒ£ FORMATO CSV CRÃTICO:
âš ï¸ ERROR COMÃšN: Los campos se desplazan si el contenido tiene comas.
SOLUCIÃ“N: SIEMPRE usar comillas dobles para encerrar campos con comas.
Ejemplo: "contenido con, comas, y mÃ¡s texto"
VALIDACIÃ“N: Contar comas en header vs data - DEBEN SER IGUALES.

ğŸ”§ HERRAMIENTA REQUERIDA: 
   - Python con mÃ³dulo csv (import csv)
   - Usar csv.writer() con quoting=csv.QUOTE_MINIMAL
   - Usar csv.reader() para validar
   - NO intentar generar CSVs manualmente con concatenaciÃ³n de strings

3ï¸âƒ£ CAMPOS PERCENT (Products CSV):
âš ï¸ IMPORTANTE: Cada campo numÃ©rico de calificaciÃ³n tiene su campo _percent correspondiente.
CÃLCULO: Multiplicar el valor por 10 (ejemplo: 9.8 â†’ 98)
Campos con percent:
   - product_total_ranking â†’ product_total_ranking_percent
   - product_ingredient_quality â†’ product_ingredient_quality_percent  
   - product_flavor â†’ product_flavor_percent
   - product_scent â†’ product_scent_percent
   - product_value_for_money â†’ product_value_for_money_precent (typo intencional)
âš ï¸ Nota: "precent" en el Ãºltimo campo mantiene el typo por compatibilidad.

4ï¸âƒ£ AprendÃ© el patrÃ³n de los archivos de ejemplo:
   - Best5s.csv (molde vacÃ­o)
   - Products.csv (molde vacÃ­o)
   - Best5sSample.csv
   - ProductsSample.csv
   - Sample.pdf

5ï¸âƒ£ Una vez entendido el patrÃ³n, cuando te pase un nuevo PDF:
   - GenerÃ¡ best5s_[tema].csv y products_[tema].csv siguiendo las mismas columnas, orden y formato.
   - RespetÃ¡ texto literal, no resumas ni cambies palabras.
   - âš ï¸ EXCEPCIÃ“N: El campo lede_paragraph debe tener MÃXIMO 150 caracteres.
     Si el texto original es mÃ¡s largo, resumir manteniendo la esencia del mensaje.
   - UsÃ¡ <p>â€¦</p> para pÃ¡rrafos en campos largos (sin \n).
   - Mantener bullets como texto con sÃ­mbolo â—.
   - Si un campo no aparece, dejarlo vacÃ­o (nunca borrar columnas).
   - GuardÃ¡ los CSV en la carpeta /csv generados/.

6ï¸âƒ£ ExtracciÃ³n de URLs e ImÃ¡genes:
   
   ğŸ” PASO 1: Extraer URLs embebidas del PDF
   Las URLs estÃ¡n como HIPERVÃNCULOS EMBEBIDOS, no como texto visible.
   
   Comando clave:
   strings "archivo.pdf" | grep "/URI" | grep -E "https?://"
   
   Esto revelarÃ¡:
   - URLs de hero image (cerca de [source] del H1)
   - URLs de imÃ¡genes de productos (cada [source] por producto)
   - URLs de compra (Buy Now â†’)
   - URLs de Top Pick (imagen y CTA)
   
   ğŸ“‹ MAPEO de URLs encontradas:
   - Hero image â†’ campo hero_image_url (Best5s CSV)
   - Producto #1 imagen â†’ campo product_image_url (Products CSV)
   - Producto #1 compra â†’ campo product_buy_url (Products CSV)
   - Producto #2-5 (repetir el patrÃ³n)
   - Top Pick imagen â†’ campo top_pick_image_url (Best5s CSV)
   - Top Pick CTA â†’ campo top_pick_cta_url (Best5s CSV)
   
   âš ï¸ IMPORTANTE: 
   - SIEMPRE buscar URLs embebidas primero con strings
   - pdftotext NO muestra las URLs de hipervÃ­nculos
   - Los marcadores [source] indican DÃ“NDE estÃ¡n, pero la URL estÃ¡ embebida
   - Webflow solo acepta URLs pÃºblicas (https://...)
   - Si no hay URLs embebidas, dejar campos vacÃ­os

7ï¸âƒ£ Antes de generar:
   - ContÃ¡ cuÃ¡ntos bullets, ingredientes, checklist y pilares hay realmente.
   - LlenÃ¡ solo los existentes, dejando los demÃ¡s vacÃ­os.

8ï¸âƒ£ Limpieza de texto:
   - Unir letras separadas ("H e m p  O i l" â†’ "Hemp Oil").
   - Mantener viÃ±etas, pero no HTML en ellas.

9ï¸âƒ£ Calificaciones (Top 5 productos):
   - Letras: F, D-, D, D+, C-, C, C+, B-, B, B+, A, A+.
   - Orden descendente (no puede mejorar hacia abajo).
   - Producto #1 â†’ 4 subpuntuaciones (Ingredient Quality, Flavor, Scent, Value for Money).
   - #2â€“#5 â†’ 3 subpuntuaciones (Flavor, Scent, Value for Money).
   - Promedios coherentes y descendentes, redondeados a 1 decimal.

ğŸ”Ÿ Validaciones finales:
   - Mismo nÃºmero de columnas que header.
   - NingÃºn campo inventado.
   - âš ï¸ VALIDACIÃ“N CRÃTICA: Contar comas en header vs data - DEBEN SER IGUALES
   - âš ï¸ Comillas dobles en campos con comas para evitar desplazamiento
   - âš ï¸ El campo lede_paragraph debe tener mÃ¡ximo 150 caracteres
   
   âœ… URLs que DEBEN estar completas (si existen en el PDF):
   Best5s CSV:
   - hero_image_url
   - top_pick_image_url
   - top_pick_cta_url
   
   Products CSV (para CADA producto):
   - product_image_url
   - product_buy_url
   
   - Si las URLs embebidas NO existen: dejar campos vacÃ­os
   - CSVs listos para importar en Webflow sin ediciones adicionales

1ï¸âƒ£1ï¸âƒ£ Output final:
   - Dos CSV correctamente formateados con TODAS las URLs incorporadas
   - Reporte detallado mostrando:
     â€¢ URLs encontradas y mapeadas
     â€¢ Validaciones completadas
     â€¢ Estado: listo para importar a Webflow
   - Limpieza: eliminar archivos temporales generados durante el proceso

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ EJEMPLO DE FLUJO COMPLETO:

1. Recibir PDF â†’ "OnePet - Honest Paws Mobility Oil.pdf"

2. Extraer URLs embebidas:
   strings "archivo.pdf" | grep "/URI" | sort -u
   
   Resultado:
   âœ“ Hero: https://cdn.prod.website-files.com/.../Group%2098.svg
   âœ“ Prod #1 img: https://www.honestpaws.com/.../mobility-oil.png
   âœ“ Prod #1 buy: https://www.honestpaws.com/
   âœ“ (etc. para todos los productos)

3. Extraer texto:
   pdftotext "archivo.pdf" - | grep -v "URL"
   (Las URLs ya las tenemos del paso 2)

4. Generar CSVs con URLs incorporadas:
   - best5s_honestpaws-mobility.csv â† con hero_image_url completa
   - products_honestpaws-mobility.csv â† con product_image_url y product_buy_url
   - âš ï¸ USAR COMILLAS DOBLES en campos con comas para evitar desplazamiento
   - âš ï¸ VALIDAR: comas en header = comas en data
   
   ğŸ”§ MÃ‰TODO TÃ‰CNICO CORRECTO (usar Python con mÃ³dulo csv):
   
   ```python
   import csv
   
   # Header como string (SIN comillas)
   header_line = "Name,Slug,Collection ID,Locale ID,..."
   
   # Data como lista de valores
   row = ["Honest Paws", "slug", "", "", "texto con, comas", ...]
   
   # Escribir CSV correctamente
   with open(output_file, 'w', encoding='utf-8', newline='') as f:
       # 1. Header sin comillas
       f.write(header_line + '\n')
       
       # 2. Data con csv.writer y QUOTE_MINIMAL
       #    (aÃ±ade comillas SOLO donde sea necesario)
       writer = csv.writer(f, quoting=csv.QUOTE_MINIMAL)
       writer.writerow(row)
   ```
   
   âš ï¸ NO usar mÃ©todos manuales de concatenaciÃ³n de strings
   âš ï¸ NO usar echo/cat para escribir CSVs
   âš ï¸ El mÃ³dulo csv maneja automÃ¡ticamente comillas y escapes

5. Validar:
   
   ğŸ”§ VALIDACIÃ“N CORRECTA (usar csv.reader):
   
   ```python
   import csv
   
   with open(csv_file, 'r', encoding='utf-8') as f:
       reader = csv.reader(f)
       lines = list(reader)
       
       header = lines[0]
       data = lines[1]
       
       print(f"Header columnas: {len(header)}")
       print(f"Data columnas: {len(data)}")
       
       if len(header) == len(data):
           print("âœ… VALIDACIÃ“N EXITOSA")
       else:
           print("âŒ ERROR en nÃºmero de columnas")
   ```
   
   âš ï¸ NO usar 'tr -cd "," | wc -c' (cuenta comas dentro de comillas)
   âš ï¸ csv.reader entiende el formato CSV correctamente
   âœ“ 64 columnas en Best5s
   âœ“ 30 columnas en Products (incluye 5 campos _percent)
   âœ“ Todas las URLs presentes
   âœ“ 5 productos con calificaciones descendentes

6. Resultado: Archivos listos para importar a Webflow ğŸš€